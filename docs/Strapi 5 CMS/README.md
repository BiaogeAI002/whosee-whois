 # Whosee WHOIS - Strapi 5 æ–‡æ¡£ä¸­å¿ƒ

æ¬¢è¿æ¥åˆ° Whosee WHOIS é¡¹ç›®çš„ Strapi 5 æ–‡æ¡£ä¸­å¿ƒï¼è¿™é‡ŒåŒ…å«äº†å®Œæ•´çš„å®‰è£…ã€é…ç½®ã€é›†æˆå’Œæ•…éšœæ’é™¤æŒ‡å—ã€‚

## ğŸ“š æ–‡æ¡£ç›®å½•

### ğŸš€ [ä¸»è¦æŒ‡å— - STRAPI5_GUIDE.md](./STRAPI5_GUIDE.md)
**å®Œæ•´çš„ Strapi 5 é›†æˆæŒ‡å—**
- é¡¹ç›®æ¦‚è¿°å’Œæ¶æ„
- å®‰è£…ä¸é…ç½®æ­¥éª¤
- å†…å®¹ç±»å‹è®¾ç½®
- å¤šè¯­è¨€é…ç½®
- å‰ç«¯é›†æˆ
- éƒ¨ç½²æŒ‡å—

### ğŸ”Œ [API é›†æˆ - API_INTEGRATION.md](./API_INTEGRATION.md) 
**è¯¦ç»†çš„ API é›†æˆæ–‡æ¡£**
- API å®¢æˆ·ç«¯è®¾ç½®
- æ•°æ®æŸ¥è¯¢æ–¹æ³•
- æŸ¥è¯¢å‚æ•°æ„å»º
- é”™è¯¯å¤„ç†
- ä½¿ç”¨ç¤ºä¾‹å’Œæœ€ä½³å®è·µ

### ğŸ”„ [è¿ç§»æŒ‡å— - MIGRATION_GUIDE.md](./MIGRATION_GUIDE.md)
**ä» Strapi 4 åˆ° Strapi 5 çš„è¿ç§»æŒ‡å—**
- ä¸»è¦å˜åŒ–è¯´æ˜
- æ•°æ®ç»“æ„å¯¹æ¯”
- ä»£ç æ›´æ–°æ­¥éª¤
- è¿ç§»æ£€æŸ¥æ¸…å•
- å¸¸è§è¿ç§»é—®é¢˜

### ğŸ”§ [æ•…éšœæ’é™¤ - TROUBLESHOOTING.md](./TROUBLESHOOTING.md)
**å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ**
- API å“åº”é—®é¢˜
- è®¤è¯å’Œæƒé™é—®é¢˜
- å¤šè¯­è¨€é—®é¢˜
- æ€§èƒ½ä¼˜åŒ–
- è°ƒè¯•æŠ€å·§

## ğŸ¯ å¿«é€Ÿå¼€å§‹

### æ–°æ‰‹å…¥é—¨
1. é˜…è¯» [ä¸»è¦æŒ‡å—](./STRAPI5_GUIDE.md) äº†è§£æ•´ä½“æ¶æ„
2. æŒ‰ç…§å®‰è£…æ­¥éª¤è®¾ç½®å¼€å‘ç¯å¢ƒ
3. æŸ¥çœ‹ [API é›†æˆæ–‡æ¡£](./API_INTEGRATION.md) å­¦ä¹ å¦‚ä½•è°ƒç”¨ API

### è¿ç§»ç°æœ‰é¡¹ç›®
1. æŸ¥çœ‹ [è¿ç§»æŒ‡å—](./MIGRATION_GUIDE.md) äº†è§£ä¸»è¦å˜åŒ–
2. æŒ‰æ­¥éª¤æ›´æ–°ä»£ç 
3. ä½¿ç”¨ [æ•…éšœæ’é™¤æŒ‡å—](./TROUBLESHOOTING.md) è§£å†³é—®é¢˜

### é‡åˆ°é—®é¢˜
1. é¦–å…ˆæŸ¥çœ‹ [æ•…éšœæ’é™¤æŒ‡å—](./TROUBLESHOOTING.md)
2. æ£€æŸ¥ç›¸å…³çš„ API æ–‡æ¡£
3. å‚è€ƒå…·ä½“çš„é…ç½®æ­¥éª¤

## ğŸ› ï¸ æŠ€æœ¯æ ˆæ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Whosee WHOIS æ¶æ„                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚   Next.js 15    â”‚â—„â”€â”€â–ºâ”‚   Strapi 5      â”‚                â”‚
â”‚  â”‚   (å‰ç«¯åº”ç”¨)     â”‚    â”‚   (Headless CMS) â”‚               â”‚
â”‚  â”‚  localhost:3000 â”‚    â”‚  localhost:1337 â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚           â”‚                       â”‚                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚  â€¢ React 19     â”‚    â”‚  â€¢ SQLite/PG    â”‚                â”‚
â”‚  â”‚  â€¢ TypeScript   â”‚    â”‚  â€¢ i18n Plugin  â”‚                â”‚
â”‚  â”‚  â€¢ Tailwind CSS â”‚    â”‚  â€¢ Upload Pluginâ”‚                â”‚
â”‚  â”‚  â€¢ next-intl    â”‚    â”‚  â€¢ REST API     â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ æ ¸å¿ƒåŠŸèƒ½

### åšå®¢ç³»ç»Ÿ
- âœ… å¤šè¯­è¨€æ–‡ç« ç®¡ç† (ä¸­æ–‡/è‹±æ–‡)
- âœ… åˆ†ç±»å’Œæ ‡ç­¾ç³»ç»Ÿ
- âœ… å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
- âœ… SEO ä¼˜åŒ–
- âœ… å›¾ç‰‡ä¸Šä¼ å’Œç®¡ç†
- âœ… RSS Feed ç”Ÿæˆ

### å†…å®¹ç®¡ç†
- âœ… æ‹–æ‹½å¼å†…å®¹ç¼–è¾‘
- âœ… å‘å¸ƒçŠ¶æ€ç®¡ç†
- âœ… ç‰ˆæœ¬æ§åˆ¶
- âœ… åª’ä½“åº“ç®¡ç†
- âœ… ç”¨æˆ·æƒé™æ§åˆ¶

### API é›†æˆ
- âœ… REST API
- âœ… GraphQL æ”¯æŒ
- âœ… è®¤è¯å’Œæˆæƒ
- âœ… æ•°æ®éªŒè¯
- âœ… é”™è¯¯å¤„ç†

## ğŸŒŸ é‡è¦æ›´æ–° (Strapi 5)

### ä¸»è¦å˜åŒ–
- **æ‰å¹³åŒ–æ•°æ®ç»“æ„**: ç§»é™¤äº† `attributes` åŒ…è£…å±‚
- **æ–°å¢ documentId**: æ›´å¥½çš„å¤šè¯­è¨€æ–‡æ¡£ç®¡ç†
- **æ”¹è¿›çš„å…³ç³»å¤„ç†**: ç®€åŒ–äº†å…³ç³»æ•°æ®è®¿é—®
- **æ›´å¥½çš„æ€§èƒ½**: ä¼˜åŒ–äº†æŸ¥è¯¢å’Œå“åº”é€Ÿåº¦

### è¿ç§»è¦ç‚¹
```typescript
// Strapi 4 (æ—§)
const title = post.attributes.title;
const category = post.attributes.category?.data?.attributes?.name;

// Strapi 5 (æ–°)  
const title = post.title;
const category = post.category?.name;
```

## ğŸ“– ä½¿ç”¨è¯´æ˜

### ğŸš€ CMS é…ç½®å¿«é€ŸæŒ‡å—

#### æ­¥éª¤ 1: å®‰è£… CMS ä¾èµ–
```bash
# è¿›å…¥ CMS ç›®å½•
cd cms

# å®‰è£…ä¾èµ–
npm install
```

#### æ­¥éª¤ 2: é…ç½®ç¯å¢ƒå˜é‡
åˆ›å»º `cms/.env` æ–‡ä»¶ï¼š

```env
# ==============================================
# ğŸ”§ Strapi 5 CMS ç¯å¢ƒå˜é‡é…ç½®
# ==============================================

# æœåŠ¡å™¨é…ç½®
HOST=0.0.0.0
PORT=1337
NODE_ENV=development

# ğŸ”‘ å¯†é’¥é…ç½® (å¿…éœ€ - è¯·ç”Ÿæˆéšæœºå€¼)
# ä½¿ç”¨éšæœºå­—ç¬¦ä¸²æ›¿æ¢ä¸‹é¢çš„å ä½ç¬¦
APP_KEYS=your-app-key-1,your-app-key-2,your-app-key-3,your-app-key-4
API_TOKEN_SALT=your-api-token-salt
ADMIN_JWT_SECRET=your-admin-jwt-secret
TRANSFER_TOKEN_SALT=your-transfer-token-salt
JWT_SECRET=your-jwt-secret

# ğŸ“Š æ•°æ®åº“é…ç½® (å¼€å‘ç¯å¢ƒä½¿ç”¨ SQLite)
DATABASE_CLIENT=sqlite
DATABASE_FILENAME=.tmp/data.db

# ğŸŒ CORS é…ç½® (å‰ç«¯ URL)
FRONTEND_URL=http://localhost:3000

# ğŸ“ æ–‡ä»¶ä¸Šä¼ é…ç½® (å¯é€‰)
# CLOUDINARY_NAME=your-cloudinary-name
# CLOUDINARY_KEY=your-cloudinary-key
# CLOUDINARY_SECRET=your-cloudinary-secret
```

#### æ­¥éª¤ 3: ç”Ÿæˆå®‰å…¨å¯†é’¥
ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆéšæœºå¯†é’¥ï¼š

```bash
# ç”Ÿæˆ APP_KEYS (4ä¸ªéšæœºå­—ç¬¦ä¸²)
node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
# å¯¹æ¯ä¸ªå¯†é’¥é‡å¤æ‰§è¡Œ 4 æ¬¡ï¼Œç”¨é€—å·åˆ†éš”

# ç”Ÿæˆå…¶ä»–å¯†é’¥
node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
```

#### æ­¥éª¤ 4: å¯åŠ¨ CMS
```bash
# é¦–æ¬¡å¯åŠ¨ (ä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“)
npm run develop

# ğŸ‰ æˆåŠŸå¯åŠ¨åè®¿é—®ï¼šhttp://localhost:1337/admin
```

#### æ­¥éª¤ 5: åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·
1. æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:1337/admin`
2. å¡«å†™ç®¡ç†å‘˜ä¿¡æ¯ï¼š
   - **ç”¨æˆ·å**: admin (æˆ–æ‚¨å–œæ¬¢çš„ç”¨æˆ·å)
   - **é‚®ç®±**: æ‚¨çš„é‚®ç®±åœ°å€
   - **å¯†ç **: è®¾ç½®å¼ºå¯†ç 
   - **ç¡®è®¤å¯†ç **: é‡å¤å¯†ç 

#### æ­¥éª¤ 6: åˆ›å»º API Token
1. ç™»å½•ç®¡ç†åå°åï¼Œè¿›å…¥ **Settings** > **API Tokens**
2. ç‚¹å‡» **"Create new API Token"**
3. é…ç½® Tokenï¼š
   - **Name**: `NextJS Frontend`
   - **Description**: `ç”¨äºå‰ç«¯è®¿é—®çš„åªè¯» Token`
   - **Token duration**: `Unlimited`
   - **Token type**: `Read-only`
4. ç‚¹å‡» **"Save"** å¹¶å¤åˆ¶ç”Ÿæˆçš„ Token

#### æ­¥éª¤ 7: é…ç½®å‰ç«¯ç¯å¢ƒå˜é‡
åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env.local` æ–‡ä»¶ï¼š

```env
# ==============================================
# ğŸ“¡ å‰ç«¯ç¯å¢ƒå˜é‡é…ç½®
# ==============================================

# Strapi CMS è¿æ¥é…ç½®
NEXT_PUBLIC_STRAPI_URL=http://localhost:1337
NEXT_PUBLIC_STRAPI_API_TOKEN=your_generated_api_token_here

# å¯é€‰é…ç½®
NEXT_PUBLIC_SITE_URL=http://localhost:3000
```

### å¼€å‘ç¯å¢ƒå¯åŠ¨

```bash
# 1. å¯åŠ¨ CMS (ç»ˆç«¯ 1)
cd cms
npm run develop

# 2. å¯åŠ¨å‰ç«¯ (ç»ˆç«¯ 2)
npm run dev

# 3. è®¿é—®åº”ç”¨
# å‰ç«¯: http://localhost:3000
# CMS ç®¡ç†: http://localhost:1337/admin
```

### ğŸ”§ é…ç½®éªŒè¯

#### æ£€æŸ¥ CMS æ˜¯å¦æ­£å¸¸è¿è¡Œ
```bash
# æµ‹è¯• CMS API å¥åº·çŠ¶æ€
curl http://localhost:1337/api/blog-posts

# åº”è¯¥è¿”å›ç±»ä¼¼ï¼š{"data":[],"meta":{"pagination":{"total":0}}}
```

#### æ£€æŸ¥å‰ç«¯é›†æˆ
1. è®¿é—® `http://localhost:3000/debug`
2. æŸ¥çœ‹ "ç¯å¢ƒå˜é‡é…ç½®" éƒ¨åˆ†
3. ç¡®è®¤ Strapi URL å’Œ API Token å·²æ­£ç¡®é…ç½®

### âš ï¸ å¸¸è§é…ç½®é—®é¢˜

#### é—®é¢˜ 1: CMS å¯åŠ¨å¤±è´¥ - "Missing APP_KEYS"
**è§£å†³æ–¹æ¡ˆ**: ç¡®ä¿ `cms/.env` æ–‡ä»¶ä¸­çš„ `APP_KEYS` å·²æ­£ç¡®è®¾ç½®
```env
APP_KEYS=key1,key2,key3,key4  # ç”¨å®é™…ç”Ÿæˆçš„å¯†é’¥æ›¿æ¢
```

#### é—®é¢˜ 2: å‰ç«¯æ— æ³•è¿æ¥ CMS
**è§£å†³æ–¹æ¡ˆ**: 
1. æ£€æŸ¥ CMS æ˜¯å¦åœ¨ 1337 ç«¯å£è¿è¡Œ
2. éªŒè¯ API Token æ˜¯å¦æ­£ç¡®
3. ç¡®è®¤å‰ç«¯ `.env.local` é…ç½®

#### é—®é¢˜ 3: å›¾ç‰‡æ— æ³•æ˜¾ç¤º
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥ `next.config.ts` ä¸­çš„å›¾ç‰‡åŸŸåé…ç½®ï¼š
```javascript
images: {
  remotePatterns: [
    {
      protocol: 'http',
      hostname: 'localhost',
      port: '1337',
    },
  ],
}
```

### å¸¸ç”¨ API ç¤ºä¾‹

```typescript
// è·å–åšå®¢æ–‡ç« åˆ—è¡¨
const posts = await getBlogPosts({
  locale: 'zh',
  pagination: { pageSize: 10 },
  populate: '*'
});

// æ ¹æ® slug è·å–æ–‡ç« 
const post = await getBlogPostBySlug('my-article', 'zh');

// è·å–åˆ†ç±»åˆ—è¡¨
const categories = await getBlogCategories('zh');
```

## ğŸ¨ æœ€ä½³å®è·µ

### API è°ƒç”¨
- ä½¿ç”¨ç±»å‹å®‰å…¨çš„ API å®¢æˆ·ç«¯
- å®ç°é€‚å½“çš„é”™è¯¯å¤„ç†
- æ·»åŠ åŠ è½½çŠ¶æ€ç®¡ç†
- ä½¿ç”¨ç¼“å­˜ä¼˜åŒ–æ€§èƒ½

### å¤šè¯­è¨€å¤„ç†
- æ­£ç¡®æ˜ å°„å‰ç«¯å’Œ CMS è¯­è¨€ä»£ç 
- æä¾›è¯­è¨€å›é€€æœºåˆ¶
- æµ‹è¯•æ‰€æœ‰è¯­è¨€ç‰ˆæœ¬

### æ€§èƒ½ä¼˜åŒ–
- åªè·å–éœ€è¦çš„å­—æ®µ
- ä½¿ç”¨åˆ†é¡µå‡å°‘æ•°æ®é‡
- å®ç°é€‚å½“çš„ç¼“å­˜ç­–ç•¥
- ä¼˜åŒ–å›¾ç‰‡åŠ è½½

## ğŸ¤ è´¡çŒ®æŒ‡å—

### æ–‡æ¡£æ›´æ–°
å¦‚æœæ‚¨å‘ç°æ–‡æ¡£æœ‰è¯¯æˆ–éœ€è¦è¡¥å……ï¼Œè¯·ï¼š
1. åˆ›å»º Issue è¯´æ˜é—®é¢˜
2. æäº¤ Pull Request ä¿®å¤
3. æ›´æ–°ç›¸å…³çš„ç¤ºä¾‹ä»£ç 

### é—®é¢˜åé¦ˆ
é‡åˆ°é—®é¢˜æ—¶ï¼Œè¯·æä¾›ï¼š
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- é‡ç°æ­¥éª¤
- ç¯å¢ƒä¿¡æ¯ (Node.js ç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿç­‰)
- ç›¸å…³çš„é…ç½®æ–‡ä»¶

## ğŸ“ è·å–å¸®åŠ©

### å®˜æ–¹èµ„æº
- [Strapi 5 å®˜æ–¹æ–‡æ¡£](https://docs.strapi.io/dev-docs/intro)
- [Next.js æ–‡æ¡£](https://nextjs.org/docs)
- [next-intl æ–‡æ¡£](https://next-intl-docs.vercel.app/)

### ç¤¾åŒºæ”¯æŒ
- [Strapi Discord](https://discord.strapi.io/)
- [Stack Overflow](https://stackoverflow.com/questions/tagged/strapi)
- [GitHub Issues](https://github.com/strapi/strapi/issues)

### é¡¹ç›®ç›¸å…³
å¦‚æœ‰é¡¹ç›®ç‰¹å®šé—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
1. [æ•…éšœæ’é™¤æŒ‡å—](./TROUBLESHOOTING.md)
2. é¡¹ç›®çš„ GitHub Issues
3. å¼€å‘å›¢é˜Ÿè”ç³»æ–¹å¼

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0  
**æœ€åæ›´æ–°**: 2024-12-19  
**ç»´æŠ¤è€…**: Whosee Development Team

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-12-19)
- âœ… å®Œæˆ Strapi 5 ä¸»è¦æŒ‡å—
- âœ… æ·»åŠ  API é›†æˆè¯¦ç»†æ–‡æ¡£  
- âœ… åˆ›å»ºè¿ç§»æŒ‡å—
- âœ… ç¼–å†™æ•…éšœæ’é™¤æŒ‡å—
- âœ… å»ºç«‹æ–‡æ¡£ç´¢å¼•ç»“æ„